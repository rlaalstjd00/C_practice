## 동적 메모리 할당 (dynamic memory allocation)

변수를 선언하는 대신 프로그램의 요청으로 메모리를 할당하는 것이다.

 #### malloc 함수

`malloc` 함수를 호출해 동적 메모리 할당을 요청하면, 요구하는 크기의 메모리를 할당하고 그 시작 주소를 반환한다.

````c
int * p;
p = (int *)malloc(40);
if (p==NULL){
    // 동적메모리 할당 실패
}
````

위의 코드와 같이 할당받을 메모리의 크기를 byte 단위로 지정한다.

사용은 `p[3] = 2;`, `*(p+3) = 2;`  와 같이 배열처럼 사용한다.

> `malloc` 함수의 반환은 `void *` 이다. (정수를 저장하기 위해선 `(int *)malloc(40)` 과 같이 형변환 과정이 필요함)
>
> `malloc` 함수를 이용한 동적 메모리 할당시, 조건문같은 것을 이용해 적절한 예외처리를 해주는 것이 좋다.

#### 배열 키우기

동적으로 할당된 배열은 공간이 부족한 경우 더 큰 배열을 할당하여 사용할 수 있다.

````c
int * array = (int *)malloc(4*sizeof(int));
// array의 크기가 부족할 때
int * tmp = (int *)malloc(8*sizeof(int));
for(i=0; i<4; i++){
    tmp[i] = array[i];
}

// tmp 포인터 변수 (새 배열의 시작주소)를 array 포인터변수 (원래 배열의 시작주소)에 대입
array = tmp;
````

> C 언어에서는 자바와 다르게 따로 garbage collector 같은 개념이 없기 때문에, 처음에 존재했던 쓸모없는 배열의 처리가 따로 필요할 것이다.
